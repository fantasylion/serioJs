/*! serioJs 2018-02-02 */
!function(win,$){"use strict";var _global,ActivityUtils=function(a){this._initial(a)};ActivityUtils.initial=function(a){return new ActivityUtils(a)},ActivityUtils.prototype={constructor:this,_initial:function(a){var b=this,c={queryUrl:void 0,tableSelect:"#table_template",paginSelect:"#pagin_template",conditionBoard:".partTable",currentPageBoard:".currentPage",totalPageBoard:".tobalePage",pagingBoard:".table_pager",dataBoard:".editorTableDataTr",dataTableBoard:".editorheader",pagingTableBoard:".editorTable"};b.opt=Object.assign(c,a)},parseTemplate:function(template,data,callback){var _this=this,str=null,result=template.replace(/{{([^}}]+)?}}/g,function(s0,s1){return str=eval(s1),"null"==str||"undefined"==str||void 0==str?"":str});callback.after&&callback.after.call(_this,result)},loadTable:function(a){var b=this;loxia.asyncXhrGet(_contextPath+b.opt.queryUrl,a,{success:function(a){b.renderTable(a),b.renderFlipOver(a.pagination)},error:function(a){console.log(a)}})},renderTable:function(a){var b=this,c=a.items,d="";for(var e in c)b.parseTemplate($(b.opt.tableSelect).html(),c[e],{after:function(a){d+=a}});$(b.opt.dataTableBoard).after(d);for(var f in a.selectTriggers)$("."+f).attr("checked","checked")},renderFlipOver:function(a){var b=this;$(b.opt.pagingBoard).remove(),b.parseTemplate($(b.opt.paginSelect).html(),a,{after:function(a){$(b.opt.pagingTableBoard).after(a)}})},jumpNext:function(){var a=this,b=$(a.opt.currentPageBoard),c=$(a.opt.totalPageBoard),d=b.html(),e=c.html();parseInt(d)+1<=parseInt(e)&&a.jumpPage(parseInt(d)+1)},jumpPre:function(){var a=this,b=$(a.opt.currentPageBoard),c=$(a.opt.totalPageBoard),d=b.html();c.html();parseInt(d)-1>=1&&a.jumpPage(parseInt(d)-1)},jumpPage:function(a){var b=this,c=b.pageNoParam(a);$(b.opt.dataBoard).remove(),b.loadTable(c)},searchActivity:function(){var a=this,b=a.pageNoParam(1);$(a.opt.dataBoard).remove(),a.loadTable(b)},initTimeWidget:function(a,b,c){$(a).datetimepicker({showSecond:!0,timeFormat:"hh:mm:ss",stepHour:1,stepMinute:1,stepSecond:1,minDate:"-1970/01/01",maxDate:"+1970/01/01",showOn:"focus",changeMonth:!0,changeYear:!0,onClose:b,onSelect:c})},pageNoParam:function(a){var b=this,c=b.buildParam(b.opt.conditionBoard);return c.pageNo=a,c},buildParam:function(a){var b="serio-data",c=a+" ["+b+"]",d={};return $(c).each(function(a,c){var e=$(c).attr(b);""!=$(c).val()&&(d[e]=$(c).val())}),d},switchImg:function(a,b,c){if(!c)return!1;$(a).attr("src",b)},checkFormNotEmpty:function(a,b){var c={status:!1,element:[]},d=null;for(var e in b){if(!(d=$(a+" [name="+b[e]+"]")))return c.element.push(b[e]),c;if(""==$.trim(d.val()))return c.element.push(b[e]),c}return c.status=!0,c},timeClose:function(a,b,c,d,e){var f=$(e?b:a);if(""!=f.val()){$(a).datetimepicker("getDate")>$(b).datetimepicker("getDate")&&f.val(c)}var g=e?"minDate":"maxDate",h=$(e?a:b),i=h.datetimepicker("getDate");null!=i&&f.datetimepicker("option",g,new Date(i.getTime()))},submitForm:function(a,b,c,d){var e=$(a);if(e.length<=0)return void console.log("No form found, selecter:["+a+"]");var f=new FormData(e[0]);$.ajax({url:b,type:c,data:f,processData:!1,contentType:!1,success:d.success,error:d.error})}},_global=function(){return this||(0,eval)("this")}(),"undefined"!=typeof module&&module.exports?module.exports=ActivityUtils:"function"==typeof define&&define.amd?define(function(){return ActivityUtils}):!("ActivityUtils"in _global)&&(_global.ActivityUtils=ActivityUtils)}(window,jQuery);